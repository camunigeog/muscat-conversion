# These tests are ran against the generated MARC output

# Format is:
#  
# Number (manually-assigned, so that they can be referenced elsewhere in code)
# Description
# Record number
# MARC field
# Pattern (either simple string or regexp starting with slash delimeter)

# Coverage level:
# createMarcExport: 100%
# generate008: 100%
# generate245: 100%
# generateAuthors: 100%
# import: 10%
# marcConversion (controller section): 100%
# marcConversion (macros section): 100%
# muscatConversion: 100% (is exclusively a controller, so no tests)
# transliteration: 0%
# NB: These values do not include cases of bugs, marked with a bug marker: #!#


1
Basic test of record number generation
1000
001
/^SPRI-[0-9]{4}$/

2
Ensure that the data has been fully-loaded - this specifies a record very near the end
215073
001
SPRI-215073

3
Ensure *lpt parsing
8690
245
moreĭ = Register der

4
500 should not have :,
5472
500
1882-83 : die

5
Use of " as a pseudo- word boundary character, so that "<em>...</em>" gets protected rather than result in e-dot; see: /reports/transliterateem/
174305
245
v "Cantus Arcticus" Ė. Rautavaary

6
Roman numerals followed by hyphen should not be transliterated (implementation pending)
206607
880
XVII-

7
Roman numerals followed by hyphen should not be transliterated (implementation pending)
143341
880
XXI-

8
Unescape Muscat escaped asterisks @*
19682
520
(*495)

9
008 position 06-14 continuing serials e.g. 1976-
1008
008
u1976uuuu

10
008 position 06-14 "Undated-"
177897
008
uuuuuuuuu

11
008 position 06-14 "1997/98-"
145353
008
/^.{6}u1997uuuu/

12
008 position 06-14 "1977?-"
57312
008
u1977uuuu

13
008 position 06-14 "1945-73, 1989-"
19832
008
u1945uuuu

14
008 position 06-14 normalise YYYY-YY "1960-61"
1034
008
d19601961

15
008 position 06-14 *ser normalise YYYY "1991"
1052
008
d19911991

16
008 position 06-14 handle absent date "[n.d.]"
1102
008
nuuuuuuuu

17
008 position 06-14 Probable date "[1994]"
1306
008
s1994####

18
008 position 06-14 *art simple date "1915"
11150
008
s1915####

19
008 position 06-14 "1923 (1931 printing)"
12522
008
r19311923

20
008 position 15-17: Place of publication
169741
008
enk

21
008 position 18-20 form=CD-ROM gets ###
2023
008
tma###

22
008 position 18-20 form=Sound cassette gets |||
102409
008
fr#|||

23
008 position 18-20 form=Poster gets nnn
95733
008
xx#nnn

24
008 position 18-20 Videorecording 60 min gets 060
1968
008
060

25
008 position 18-20 Videorecording [? mins] gets |||
78699
008
nz#|||

26
008 position 18-20 diags gets a##
1115
008
a##

27
008 position 18-20 diags and map gets a and b
1144
008
ab#

28
008 position 18-20 Journal *freq=irregular gets # then x (then #)
1027
008
#x#

29
008 position 21 form=Map gets |
101161
008
xx#||||

30
008 position 22 form=Microfiche *doc gets |
1186
008
xx#####|

31
008 position 22 form=Microfiche *art/*j gets b
11291
008
/^.{22}b/


32
008 position 23 form=PDF gets s
201908
008
ar#|ss

33
008 positions 24-27 form=Map gets #|##
101161
008
#|##

34
008 positions 24-27 *ser Bibliographies gets |b
1005
008
|b##

35
008 positions 24-27 *local=Offprint gets 2
198459
008
2###

36
008 position 28 *kw example gets o
15998
008
#o0

37
008 position 29 *ks=061.3 gets 1
4263
008
/^.{29}1/

38
008 positions 30-31 *doc *form=Microfiche gets ||
1186
008
/^.{30}\|\|/

39
008 positions 30-31 *art/*in *t contains Festschrift gets 1|
13607
008
/^.{30}1\|/

40
008 position 33 *doc *k=82-1 gets p
1319
008
p#

41
008 position 33 *ser *lang=French gets b
1031
008
#b|

42
008 position 34 *ks=92(08) gets d
2505
008
deng

43
008 position 34 *t starts autobiography gets a
6046
008
aeng

44
008 positions 35-36 *lang; test uses Esperanto (=epo)
29970
008
epo

45
1-y becomes 1-й in Cyrillic
29343
880
Выпуск 1-й.

46
Prevent multiple italic sections being swallowed in transliterated protected string handling
17256
245
Belukha ili beluga

47
In transliteration, ensure mid-word italics get properly tokenised (rather than remaining as <em> and thus e-dot)
91018
245
fazovoĭ p-T-diagrammy

48
Ditto, mid-word
79687
245
tetra-n-butilammon

49
Cyrillic should not contain a ligature in *ag/*n.. (e.g. from transliterating "Int͡skirveli")
29550
880
Инцкирвели

50
Cyrillic should not contain a ligature in *e/*n/*n.. (e.g. from transliterating "Zherebt͡sov")
1844
880
compiled by И.Л. Жеребцов

51
Cyrillic should not contain a ligature in 880-700 (e.g. from transliterating "Zherebt͡sov")
1844
880
‡6700-04/(N‡aЖеребцов, И. Л.,‡ecompiler

52
Ensure 'Anon.' is treated as a transliterated protected string
6451
880
Anon.

53
English-name author should not result in an 880 transliteration
151048
!880
Доwдесwелл, J. А.

55
Dot-e transliteration failure should not occur in 245
58374
245
Michael

56
Relator terms should be in English in records in scope of transliteration
1844
880
editor.

57
880 490 ‡v for Russian records having *ts with a *vno should not be transliterated (pending further discussion)
136356
880
/‡6490-04\/\(N.+‡vChast 2/

58
880 260 for Russian records has ‡b transliteration enabled
6996
880
‡bПросвящение

59
The first *art/*ag/*a field should map to the 1XX field
7195
100
Lecointe, Georges

60
Any further *art/*ag/*a fields should map to 7XX fields
8249
700
Maslov, A. L.

61
Any *art/*ag/*al fields should map to 7XX fields
1963
700
Davies, 'Taff' Gwion

62
Any *art/*e/*n fields should map to 7XX fields
5126
700
Wild, J. J.

63
Note handling
9189
500
the bird

64
Any *art/*in/*ag/*a fields should NOT map to a 1XX or 7XX field
1902
!1**
Filip

65
Any *art/*in/*ag/*al fields should NOT map to a 7XX field
3427
!7**
Karol Edmond

66
Record has multiple languages
1220
041
‡anor‡aeng‡ager

67
No 100 generated for *ser
1062
!100
*

68
1xx generated for *doc/*ag/*a
1392
110
International Arctic Science Committee

69
1xx generated for *art/*ag/*a (see also next test)
4179
100
Campsterianus

70
1xx not generated for *art/*in/*ag/*a (see also previous test)
4179
!100
Jones

71
1xx generated for *art/*ag/*a in a record having *art/*j
1109
100
Ward

72
Ensure the 100 line ends with punctuation; this example is bracket
1218
100
/\)$/

73
Ensure the 100 line ends with punctuation; this example is dot
1221
700
/\.$/

74
Second author appears as 700, not 100 (see also next test)
7457
!100
Andersson

75
Second author appears as 700, not 100 (see also previous test)
7457
700
Andersson

76
Author in analytic child is pulled into parent (here parent record 7463 and child 9375 which has author Heurck)
7463
700
Heurck

77
Title in analytic child is pulled into parent (here parent record 7463 and child 9375)
7463
700
‡aHeurck, H. van.‡tBotanique: diatomées.

78
Analytic has second indicator set to 2 for 700
7463
i700
12

79
Author in analytic child is pulled into parent (here parent record 7463 and child 7569 which has corporate author)
7463
710
Expédition Antarctique Belge

80
Corporate author
7569
110
Expédition Antarctique Belge

81
Ensure the 7xx line ends with punctuation; this example is bracket (similar to test #72)
7463
700
/et conclusions.$/

82
Ensure the 7xx line ends with punctuation; this example is dot (similar to test #73)
7463
700
/Gamasidae\)$/

83
700: Subfield g must be preceded by a full stop, question mark or exclamation mark
2787
700
.‡g(alternative name)

84
If the author is also a *e illustrator (for example), do not create a second entry (700) as well as the 100
147053
!700
Debenham, Frank

85
Each *e/*n, *role, with Relator Term lookup substitution, results in 700
47079
700
Michael, Henry N.,‡eeditor.

86
An *n1 with value 'others' does not result in a 700
8988
!700
others

87
*ke value in parent record is just a GUI indicator, not resulting in MARC data
1221
!700
ME1221

88
Analytic children only have their first author pulled in (e.g. second author of record 7501 ignored)
7463
!700
Stephani

89
700: Subfield ‡t must be preceded by a question mark, full stop, hyphen or closing parenthesis; here testing dot
9843
700
.‡t

90
Authors: subfield ‡u, if present, goes before subfield ‡e
127378
700
, ‡uHUN-FOMI-RSC,‡eeditor.

91
Space out initials for authors (see also next test)
1296
100
J. J.

92
245 does not space out initials for authors (see also previous test)
1296
245
J.J.

93
110 separates *a/*n1 portions before and after dot into ‡a and ‡b (see also next test)
12195
110
‡aCanada.‡b Royal Commission

94
110 does not separate *a/*n1 portions on exceptions list (see also previous test)
124936
110
‡aFrederick A. Cook Society.

95
Spacing out initials should be tolerant of Cyrillic transliteration
175507
700
Kh. M.

96
Spacing out initials should be tolerant of non-ASCII initials
201319
100
Č. M.

97
Spacing out initials should be tolerant of non-ASCII initials, copied into parent 700
44492
700
Č. M.

98
In *nd classification, strip italic tags
45578
100
‡cSir.

99
In *nd classification, handle special-cases which generate a ‡b
165177
100
‡aAlbert‡bI,‡cPrince of Monaco.

100
In *ad classification, date appears as ‡d
6575
100
,‡d 1863-1945.

101
In *ad classification, avoid space after comma before ‡d to avoid Bibcheck error "100: Subfield d must be preceded by a comma"
6575
100
,‡d

102
Basic *ad classification check
1165
100
‡etranslator

103
Basic *aff classification check
121449
100
‡uGBR-UMa-SG

104
1xx: If first *ag is actually an editor, mutate to 7xx (see also test #162)
31105
710
‡aJapan Antarctic Survey,‡eeditor.

105
In author handling, allow exact relator terms match (e.g. 'editor')
113955
700
‡eeditor

106
In author handling, support substring match (e.g. 'Translated from the Icelandic by')
1639
700
‡etranslator

107
100 ‡a transliteration results in 880
6653
880
‡6100-01/(N‡aБогданович, К. И.

108
700 ‡a transliteration in Russian record results in 880
23186
880
‡aСементовский, В. Н.

109
Ensure correct multiline handling of 880 in authors module
23186
880
‡aНовосильский, П. М.

110
In generate other entities phase of authors, ensure second author in a *ser does not appear
107192
!700
*

111
Ensure field code does not appear again (in the line itself) in generate other entities phase of authors
1127
!700
 700

112
In generate other entities phase of authors, ensure first author does not reappear in a 700 but is in 100 (see also next test)
1127
!700
‡aEvers, Dietrich

113
In generate other entities phase of authors, ensure first author does not reappear in a 700 but is in 100 (see also previous test)
1127
100
‡aEvers, Dietrich

114
In generate other entities phase of authors, ensure second author appears in 700
1127
700
‡aStölting, Siegfried

115
In generate other entities phase of authors, ensure third author appears in 700
132356
700
‡aPfeffer, W. Tad.

116
In generate other entities phase of authors, ensure first *al in *ag appears
1565
700
‡aFaleev, V. I.

117
In generate other entities phase of authors, ensure second *al in *ag appears
29234
700
‡aJaster, Jan

118
Check ‡g(alternative name) appears for such authors
29234
700
‡aChudzikowska, Jadwiga.‡g(alternative name)

119
Check *e (first) becomes 700
1247
700
‡aChilderhose, R. J.

120
Check second *e becomes a 700
2295
700
‡aSonnini, C. S.

121
Relator term ‡e does not have a space between the comma and ‡e or the ‡e and the term
2295
700
C. S.,‡econtributor

122
Multiple relator term ‡e values do not have space between
2295
700
‡econtributor,‡eeditor.

123
Anon handling for 100
1394
100
‡aAnonymous.

124
Single name handling for 100
181460
100
‡aIgnatius.

125
Spacing-out handling in single name handling for 100
213499
100
‡aE. L. H.

126
Surname-only handling for 100
111558
100
‡adi Georgia.

127
Surname-only handling for 100 with entities
3904
100
‡aSöderbergh.

128
Conference handling for n1 in 1xx
50035
111
‡aConference on the Conservation of Antarctic Seals.

129
Conference handling for n1 in 1xx with entities
8728
111
‡aCongrès

130
Conference handling for Russian LoC transliterated values
32818
111
‡aNauchnai͡a konferent͡sii͡a

131
Conference handling for congress (not US Congress) (see also next test)
55763
111
‡aXXIII International Geographical Congress.

132
Conference handling for US Congress (see also previous test)
1912
110
‡aUnited States.‡b Congress.

133
111 ‡a: Simple conference name
173340
111
/‡aArctic Science Conference\.$/

134
111 ‡a: Conference and date
57564
111
‡aSymposium on Antarctic Resources‡d(1978)

135
111 ‡a: Conference, date and location
32965
111
‡aConference on Antarctica‡d(1959 :‡cWashington, D.C.)

136
111 ‡a: Conference, number, date and location
51434
111
‡aInternational Conference on Permafrost ‡n(2nd :‡d1973 :‡cYakutsk, Siberia, U.S.S.R)

137
111 ‡a: Conferences with commas not intended as delimeters
55264
111
‡aConference on Soil-Water Problems in Cold Regions ‡n(2nd :‡d1976 :‡cEdmonton, Alberta)

138
1xx *n2 basic handling
1296
100
‡aStansfield, J. J.

139
1xx *n2 fuller form of name
170179
700
‡aIrons, David B. ‡q(David Bruce)

140
1xx *n2 fuller form of name with entities
4366
100
‡aFaye, H. ‡q(Hervé)

141
Check for *a not containing a *nd (see also next test)
1105
100
/‡aOrvik, James M.$/

142
Check for *a containing a *nd (see also previous test)
1201
100
,‡cSir.

143
1xx *nd prefix with entities
53959
100
,‡cCapitán.

144
1xx *nd suffix
23362
100
,‡c2nd Baron Tweedsmuir.

145
1xx *nd between *n1 and *n2
3180
700
,‡cFreiherr von

146
Basic relator term handling
181142
710
,‡eeditor.

147
Basic relator term handling with entities
10004
700
,‡eeditor.

148
*nd misc list handling in 1xx; also: has space after ‡g
1218
100
‡g (Campsterianus)

149
916 no value if no *acc
1102
!916
*

150
*ad affiliation list handling in 1xx (complete string match)
19171
100
, ‡uO.M.I.

151
*ad affiliation with ‡c and ‡u
18045
100
,‡cRev.,‡uO.M.I.

152
Relator term handling with //ONLY flag (exact match)
122529
700
,‡econtributor.

153
Relator term handling with //ONLY flag (partial match)
1253
700
,‡eillustrator.

154
Relator term handling with //NOT flag (positive match)
44786
700
,‡eeditor.

155
Relator term handling with //NOT flag (negative match)
24674
!700
‡eeditor

156
Relator term handling with //REQUIRES flag (positive match)
139689
700
‡enarrator

157
Relator term handling with //REQUIRES flag (negative match)
101462
!700
‡enarrator

158
7xx *e/*n relator terms support
147053
700
,‡eillustrator.

159
Test *e/*role handling when *n1 = 'the author'
147053
700
,‡eillustrator.

160
100 Ensure dot at end when not naturally present
46177
100
/\.$/

161
100 Ensure single dot at end when already naturally present
46175
100
/L\.$/

162
1xx: If first *ag is actually an compiler, mutate to 7xx (see also test #104)
4012
700
‡aTravis, George,‡ecompiler.

163
245 uses main title when *in exists
1104
245
‡aGlen Prosen and the memory of an Antarctic tragedy

164
245 "and 4 others" does not get transliterated in 880
210651
880
‡cА.М. Никанаров, and 4 others.

165
245 880 gets transliteration in Russian records
210651
880
‡aАнтропогенная нагрузка на устья рек Российской Арктики

166
245 first indicator set to 1 when 100 present
210651
i245
/^1./

167
245 first indicator set to 1 when other 1xx present
1102
i245
/^1./

168
245 first indicator set to 1 when 100 not present
1134
i245
/^0./

169
245 second indicator set to 4 with leading article 'the'
1110
i245
/^.4/

170
245 second indicator set to 0 with no leading article
1134
i245
/^.0/

171
245 second indicator set to 3 leading article 'Ei' in Norwegian record
103693
i245
/^.3/

172
245 *t colon handling splits to ‡a: ‡b
1119
245
‡aThe issue is survival :‡ba summary

173
245 *t with colon and record having *form results in ‡h; "it follows the title proper" "and precedes the remainder of the title"
12359
245
North‡h[videorecording] :‡ba story

174
245 *t without colon results in ‡a
1000
245
‡aAdmiralty List of Lights.

175
245 *t without colon but having *form results in ‡h after ‡a
1186
245
microorganisms‡h[microform]

176
245 ‡h for *form appears in 880 for Russian records
9543
880
Известия‡h[microform].

177
245 *ser with *t already having dot ends with single dot
137684
245
/Review\.$/

178
245 *ser with *t ending with ) gets additional . at end
1058
245
/\)\.$/

179
*ser gets Statement of Responsibility in 245
1028
245
‡cAmerican Geophysical Union

180
Basic Statement of Responsibility existence test
1159
245
 /‡cJoëlle Robert-Lamblin.

181
245 *doc Statement of Responsibility starts with first *doc/*ag/*a
1121
245
‡cNunam Kitlutsisti

182
245 *doc Statement of Responsibility continues with second *doc/*ag/*a
1121
245
‡cNunam Kitlutsisti, Mary Lenz

183
245 *art Statement of Responsibility starts with first *art/*ag/*a
1135
245
‡cR.R. Makarov

184
245 *art Statement of Responsibility continues with second *art/*ag/*a
1135
245
‡cR.R. Makarov, C.J. Denys

185
245 *art Statement of Responsibility continues with as many authors as present
181939
245
‡cP.J. Barrett, L. Carter, D. Damiani, G.B. Dunbar, E. Dunker, G. Giorgetti, M.A. Harper, R.M. McKay, F. Niessen, U. Nixdorf, A.R. Pyne, C. Riesselmann, N. Robinson, C. Hollis, P. Strong.

186
245 *art Statement of Responsibility multiple authors separated by comma-space
1135
245
Makarov, C.J.

187
245 *art Statement of Responsibility multiple author groups separated by space-semicolon-space
134805
245
H. Maitre ; F.

188
245 *art Statement of Responsibility multiple author groups with second author in second group
133876
245
‡cJ. Walden ; J.P. Smith, R.V. Dackombe ; J. Rose.

189
245 *art Statement of Responsibility does not show *aff value
133876
!245
GBR-UO-SG

190
245 *art Statement of Responsibility punctuation when 'and [0-9] others'; see: /reports/agwithonlyad/
1681
245
Fritz Müller, and 8 others.

191
245 Statement of Responsibility handling of *ad
149106
245
‡cA.R. Artemʹev, ed.

192
245 Statement of Responsibility handling of multiple *ad in an *ag
162152
245
‡cV.A. Aleksandrov, and 11 others, eds.

193
245 If *ag/*a group is '-' (e.g. due to *n1 = '-' only), skip entry in Statement of Responsibility
166552
!245
‡c

194
245 If *ag/*a group is '-' (e.g. due to *n1 = '-' only), skip entry in Statement of Responsibility (with *ad also present)
115773
!245
‡c

195
245 Add each *e role and siblings
2930
245
‡cÉlie Le Guillou ; edited by J. Arago.

196
245 No semicolon separator if *e without *ag
145630
245
‡ctranslated by Henry Myers.

197
245 Role and siblings construction
1844
245
compiled by I.L. Zherebt͡sov.

198
245 Role and siblings construction (multiple *e groups)
2295
245
; additional work by Leclerc de Buffon ; revised order, notes and additions by C.S. Sonnini.

199
245 Role and siblings construction (two *n groups in *e)
1639
245
; translated from the Icelandic by Eiríkr Magnússon and William Morris.

200
245 Role and siblings construction (three *n groups in *e, triggering comma-and)
3876
245
drawings by A. Faguet, Mesnel, Emile Bayard and J. Stewart

201
245 Extraction of *n1, *n2, *nd
1201
245
‡cSir Richard Collinson.

202
245 Initials are not spaced out
1135
245
‡cR.R.

203
245 Initials spacing handling
1410
245
S. le R.

204
245 Clear italics from *nd
118086
245
‡cSr Alice Romanchuk (SGM).

205
245 *nd special cases
172094
245
Lord Terry Lewin.

206
245 with *n2
1134
245
‡cInigo Everson

207
245 without *n2
1113
245
‡cPacific Circle Consortium.

208
880 245 unexpand initials to remove spaces works after transliteration
194996
880
Е.В. Напрасникова.

209
245 unexpand initials correct for initial plus name
1139
245
‡cC. Huntly Gordon.

210
245 Classify single value *nd field prefixes list items handling with *nd *n2 *n1
184117
245
‡cAdmiral of the Fleet, Sir Henry Leach.

211
245 Classify single value *nd field prefixes list items handling with *nd *n1
4252
245
‡cAmiral Pâris.

212
245 Classify single value *nd field prefixes list items with entities
19668
245
‡cKommandørkaptajn F.C.S. Bangsbøll.

213
245 Classify single value *nd field between *n1 and *n2 list
3180
245
‡cSigismund, Freiherr von Herberstein,

214
245 Classify single value *nd field *n2 *n1 *nd suffix
1983
245
Harris B. Stewart, Jr.

215
245 Classify single value *nd field *n1 *nd
4019
245
‡cH.L.L., pseud.

216
Place code xxu (USA) with no further detail is valid as SPRI has no further data, but triggers Bibcheck warning to check
1199
008
xxu

217
Date range 196u in 008 is valid, but wrongly triggers Bibcheck error now whitelisted
1150
008
196u####

218
Dollar in 245 is not an indicator, but wrongly triggers Bibcheck error now whitelisted
203691
245
Trust $100 club

219
300 $a map is valid, but wrongly triggers Bibcheck error now whitelisted
54670
300
‡aMap folio

220
300 should not split word 'bibliography' with ‡b
54670
300
bibliography

221
300 should not end up with ‡a with value colon
151371
!300
‡a:‡bmap

223
Dollar in 520 is not an indicator, but wrongly triggers Bibcheck error now whitelisted
140044
520
index (θ .\$t/h²\$).

224
Dollar in 541 is not an indicator, but wrongly triggers Bibcheck error now whitelisted
148863
541
‡h50 AUS$ 

225
Money value string $5 in 541 is not an indicator, but wrongly triggers Bibcheck error about repeatable field now whitelisted
9220
541
‡h$50.00 ‡5UkCU-P

226
541 has $5 set, but triggers Bibcheck warning to check
9220
541
‡5UkCU-P

227
008 position 33 is correctly set to a, despite wrongly triggering Bibcheck error now whitelisted
1061
008
#a|

228
Record ID in 001 contains prefix 'SPRI-', which createMarcExport relies on
1061
001
SPRI-1061

229
Leader byte count
1005
LDR
/^00[0-9]{3}nas/

230
880 link reciprocality (see also next test)
1062
245
‡6880-01

231
880 link reciprocality (see also previous test)
1062
880
‡6245-01

232
Merging with a field not present in either
1033
!916
*

233
Merging: 'M' strategy, with M present
1033
866
‡a1979-2004

234
Merging: 'M' strategy, with M and V both present
1033
001
SPRI-1033

235
Merging: 'V' strategy, with V present (and M)
10506
245
‡aZapiski po gidrografii.

236
Merging: 'V else M' strategy, with V present
1033
260
‡aWashington, D.C.

237
Merging: 'V else M' strategy, with M present but no V
1033
856
‡uhttp:

238
Merging: 'V and M' strategy, with both present (see also next test)
50968
651
‡2udc‡a(*41) -- Canada.

239
Merging: 'V and M' strategy, with both present (see also previous test)
50968
651
‡aCanada, Northern‡vPeriodicals.

240
Merging: 'V and M' strategy, with V only present
12775
710
‡aRossiĭskiĭ Gidrologicheskiĭ Institut.

241
Merging: 'V and M' strategy, with M only present
12775
651
‡2udc‡a(*50) -- Soviet Union.

242
Leader does not have indicators
29550
iLDR
''

243
00x fields do not have indicators
29550
i008
''

244
MARC parser note lines do not appear in the final record
1000
!***
Notes:

245
String 'macro' from MARC parser does not appear in final record
1000
!***
macro

246
Spaces present between blocks in MARC parser are retained in final record
1049
876
Record ‡zSPRI holds

247
MARC parser block check
1049
001
SPRI-1049

248
MARC parser indicators check
1049
i300
##

249
MARC parser optional block indicator (e.g. ‡?u) check
188509
856
‡uurn

250
MARC parser dynamic indicator block check
1108
i242
14

251
MARC parser XPath check
1003
866
‡x1st ed.

252
MARC parser horizontal repeatability check
1010
876
‡zAvailable online ‡zLibrary holds

253
MARC parser vertical repeatability check
1599
650
‡aZ -- Miscellaneous.‡2local

254
MARC parser fixed string check
3056
541
‡5UkCU-P

255
MARC parser check of passing in XPath /
3056
100
‡aBarrow, John,‡cSir.

256
Multiple *con in 583
12376
583
‡3copy A (maps)

257
MARC parser check of 'A' (all) control character: value present (see also next test)
3056
541
‡aMather, J.H. (bequest) ‡5UkCU-P

258
MARC parser check of 'A' (all) control character: not value present (see also previous test)
3057
!541
*

259
MARC parser check of 'E' (any [either]) control character
1049
876
Record ‡zSPRI holds

260
MARC parser check that if optional block is skipped because of no value then following block will not have a space before
1049
876
/^‡xFormerly exchanged/

261
MARC parser check that trailing space is trimmed
1054
876
/Polar Record$/

262
MARC parser check of records with insertion of reciprocal 880 marker at start of source lines: multiline reassembly
1697
700
/^‡6880-0[1-9]‡aUrsov/

263
MARC parser check of records with insertion of reciprocal 880 marker at start of source line: standard line
1062
245
/^‡6880-01‡aSevernyĭ/

264
Italic stripping in final MARC record
1131
245
body length of Euphausia superba Dana /‡cJ.

265
Superscript tag stripping in final MARC record
2800
245
1er Partie

266
Subscript tag stripping in final MARC record
61528
520
to σθ and

267
MARC parser macro chaining (example here adds dot at end)
2800
650
.‡2

268
MARC parser parameter parsing
188509
856
urn:doi:

269
916 multiple component parts present in a group are first combined using comma-space (see also test #585)
56613
916
‡a63024 (v.1), 63025 (v.2), 70369 (v.3)

270
Macro validisbn validates correct ISBN
1182
020
‡a096861387X

271
Macro validisbn gives valid result for EANs
211150
020
‡a5391519681503

272
Macro validisbn invalidates incorrect ISBN
49940
020
‡z0871446801

273
Macro prepend: value present
49940
546
‡aIn Danish.

274
Macro prepend: value not present
49941
!546
*

275
Macro ifValue: value present
1058
242
‡yeng

276
Macro ucfirst
1054
310
‡aIrregular

277
Macro ifElse: value present
1010
i856
/^4/

278
Macro ifElse: value not present
188509
i856
/^#/

279
Macro colonSplit: colon present
3765
246
‡aThulia :‡ba tale

280
Macro colonSplit: colon not present
1019
246
‡aCanada. Mines Branch. Monographs

281
Macro dotEnd, without extended character list: dot present
1102
520
/Melville Island\.$/

282
Macro dotEnd, without extended character list: dot not present
1109
520
/Vatnajökull area\.$/

283
Macro dotEnd, with extended character list: ] present
1105
260
/‡c\[n.d.\]$/

284
Macro dotEnd, with extended character list: ] not present
1063
260
/Research Establishment\.$/

285
Macro excludeNoneValue: string with value '-'
138387
!520
*

286
Macro excludeNoneValue: normal string
1102
520
‡aShips on route

287
Macro multipleValues: value(s)
205727
546
‡aIn English and Inuktitut.

288
Macro multipleValues: no value
1102
!546
*

289
Macro multipleValues: uniqueing
1337
948
/‡bIW$/

290
Macro implode: multiple values
132384
948
‡bOM, WM

291
Macro implode: single value
1104
948
/‡bHS$/

292
Macro implode: no values
1007
!948
‡b

293
Macro commaAnd: >2 values
160854
546
‡aIn Danish, English, Greenlandic and German.

294
Macro commaAnd: 2 values
1144
546
‡aIn German and French.

295
Macro commaAnd: 1 value
115769
546
‡aIn Nenets.

296
Macro commaAnd: no values
1102
!546
*

297
Macro generate260: multiple *pg
76743
260
‡aBoulder, CO :‡bUniversity of Colorado, Cooperative Institute for Research in Environmental Studies ;‡aParkville, Victoria :‡bUniversity of Melbourne, Meteorology Department,‡c

298
Macro generate260: single *pg
1786
260
‡aParis :‡bTerres australes et antarctiques françaises,‡c

299
Macro generate260: multiple *pl within a *pg
1639
260
‡aLondon ;‡aFelling-on-Tyne :‡b

300
Macro generate260: sine loco (i.e. *pg without *pl)
1484
260
‡a[S.l.] :‡b

301
Macro generate260: multiple *pu within a *pg
1223
260
‡a[Cambridge] :‡bNatural Environment Research Council :‡bBritish Antarctic Survey,‡c

302
Macro generate260: sine nomine (i.e. *pg without *pu)
1730
260
:‡b[s.n.],‡c

303
Macro generate260: multiple *pg has semicolon between
76743
260
Studies ;‡a

304
Macro generate260: multiple ‡b has colon between
1223
260
‡bNatural Environment Research Council :‡bBritish 

305
Macro generate260: check against incorrect 880
1054
!880
/‡a\[S.l.\] :‡b\.$/

306
880 generate260: No attempt is made to transliterate *pl
6996
880
‡a[St. Petersburg] :‡b

307
Macro generate260: date
76740
260
,‡c1985.

308
Macro generate260: *pl conversion of Muscat '[n.p.]' or '-' to MARC [S.l.]
1102
260
‡a[S.l.] :

309
Macro generate260: *pl remove round brackets
5942
260
‡aNew York and Philadelphia :

310
Macro generate260: *pl preserve square brackets
5943
260
‡a[Philadelphia, PA] :

312
Macro generate260: *d added unmodified for value representing empty ([n.d.])
1102
260
‡c[n.d.]

313
Macro generate260: *pu conversion of Muscat '[n.pub.]' or '-' to MARC [s.n.]
1105
260
:‡b[s.n.],‡

314
Macro generate260: *pu ‡b standard case
1117
260
‡bCurriculum Development Centre,

315
Macro generate260: *pl ‡a standard case
1117
260
‡aCanberra :

316
No 260 880 generated if record is not Russian
148932
!880
260-

318
260 second indicator should always be #
1117
i260
##

320
Macro generate300 *p
1175
300
/‡a12 p\.$/

321
Macro generate300 no *p
1107
300
‡ap. 341-343.

323
Macro generate300 *pt
1129
300
‡ap. 1-21.

324
Macro generate300 no *pt
1106
300
‡a9 p., plates. ;‡

325
Macro generate300 *p rather than *pt
15716
300
‡a288 p. ;

326
Macro generate300 *pt rather than *p
25180
300
‡ap. 429-441 :

327
Macro generate300 split off +
67235
300
‡c30 cm. +‡esupplement.

328
Macro generate300 colon before ill. etc. (see also test #220)
51787
300
‡avariously paged :‡bill. ;

329
Macro generate300 adds dot after abbreviated term ill if not present
1584
300
‡bill. ;

330
Macro generate300 adds dot after abbreviated term illus if not present
1163
300
‡billus.

331
Macro generate300 *v present in *doc
37420
300
‡a5 vols.

333
Macro generate300 ‡e accompanying material
152326
300
‡c33.5 cm. +‡e1 CD-ROM.

334
Macro generate300 ends with dot or closing bracket (dot case)
67235
300
/‡esupplement\.$/

335
Macro generate300 $c with single *size
1103
300
;‡c28 cm.

336
Macro generate300 $c with multiple *size
9681
300
;‡cVols 1-17 34.5 cm. ;‡cVol. 18 25 cm.

337
Macro generate300 $c with space before cm requiring normalisation
54851
300
‡c20.5 x 20.5 cm.

338
Macro generate300 $c with space before cm not requiring normalisation
1102
300
‡c28 cm.

339
Macro generate300 $c with dot after cm requiring normalisation
1407
300
‡c22 cm.

340
Macro generate300 $c with dot after cm not requiring normalisation
1102
300
‡c28 cm.

341
Macro generate300 unpaged for *ser with empty result
1019
300
/‡av\.$/

342
Macro generate300 unpaged for non- *ser
1248
300
/^‡a1 volume \(unpaged\)$/

343
Macro generate300 Unpaged capitalised
174009
300
‡a1 volume (unpaged)

344
Macro generate300 unpaged does contain $c
174009
300
‡a1 volume (unpaged) ;‡c21x10 cm.

345
Macro generate300 unpaged for *doc with empty result
1334
300
/^‡a1 volume \(unpaged\)$/

346
Macro generate300 normalise dot after p
6448
300
‡a24 p.

348
Macro generate300 does not add dot after v in vols
20704
300
‡a2 vols

349
Macro generate300 normalises space between p and . requiring normalisation
49133
300
62 p.

350
Macro generate300 normalises space between p and . not requiring normalisation
13745
300
112 p.

351
300 $a should not contain *vno (see also test #352)
6787
300
/‡ap. 397-412.$/

352
773 ‡g should contain *vno (see also test #351 and #518)
6787
773
‡gVol. 2. ‡w

355
Macro nfcount: 245 2nd indicator (based on *t) should have 4 for English *t 'The '
1116
i245
/4$/

356
Macro nfcount: 245 2nd indicator (based on *t) should have 3 for Spanish 'El '
19042
i245
/3$/

357
Macro nfcount: 242 2nd indicator (based on *tt) should have 4 for English *tt 'The '
1204
i242
/4$/

358
240 leading article count is always 0 under AACR2
13989
i240
/0$/

359
Macro nfcount: Special characters with initial article are counted as nonfiling characters (with: "[La ")
9196
i245
/4$/

360
Macro nfcount: Special characters with initial article are counted as nonfiling characters (with: "'The D-2"...)
56786
i245
/5$/

361
Macro nfcount: Special characters at start of title without initial article are not counted as nonfiling characters (without: "'Penguin'")
4993
i245
/0$/

362
Macro nfcount: Special characters with initial article are counted as nonfiling characters (with: '"The home'...)
11329
i245
/5$/

363
Macro nfcount: Special characters with initial article are counted as nonfiling characters (with: 'The "Esk"')
1325
i245
/5$/

364
Macro nfcount: Quote mark but no leading article should be 0: "'Unmixing'"
56593
i245
/0$/

365
Macro nfcount: Standard case with no leading article: "Report of"
1125
i245
/0$/

366
Macro indicator1xxPresent: positive case
1257
i245
/^1/

367
Macro indicator1xxPresent: negative case
1844
i245
/^0/

368
Macro languages041 languages are uniqued
2071
041
/‡afre$/

369
Macro languages041 multiple different languages
168933
041
‡adan‡aeng‡afre

370
Macro languages041 no languages means no 041 generated
4355
!041
*

371
Macro languages041 presence of note regarding translation gives eng
23776
041
‡aeng‡

372
Macro languages041 "translation from" results in ‡h
4353
041
‡hdan

373
Macro languages041 "translated from" results in ‡h
2040
041
‡hspa

374
Macro languages041 basic lookup
2040
041
‡afre

375
Macro languages041 "Translated from article" is not a note in scope of matching
32279
!041
*

376
Macro languages041 Russian record also with "Translated from Norwegian by" ignores this non-matching note but shows Russian
175067
041
/^‡arus$/

377
Macro languages041 match is non- start-anchored so "English translation from Russian" produces match
190904
041
‡aeng‡hrus

378
Macro languages041 "Translation from <em><name></em>" with publication name in non-English record does not produce additional language match
8814
!041
‡h

379
Macro languages041 in indicator mode: positive case, i.e. includes a translation (i.e. has ‡h) (see also next test)
23776
i041
/^1/

380
Macro languages041 in indicator mode: negative case, i.e. does not include a translation (i.e. does not have ‡h) (see also previous test)
10009
i041
/^0/

381
Macro transliterateSubfields basic functionality sees subfield transliterated
35733
880
‡6490-04/(N‡aЖизнь замечательных людей ;‡vVypusk 19

382
Macro transliterateSubfields single subfield only present and in scope
1406
880
/‡6490-04\/\(N‡aШкольная Библиотека$/

383
Macro transliterateSubfields ends without result if language not supported
162154
!880
490-

384
Test of tokeniseToSubfields subroutine
35733
880
‡6490-04/(N‡aЖизнь замечательных людей ;‡vVypusk 19

385
Leader position 06: with *form (Videorecording)
9992
LDR
ng

386
Leader position 06: no *form
1187
LDR
na

387
Leader position 07: *doc
1187
LDR
m#

388
Leader positions 08-23
1188
LDR
/#a2200000#a#4500$/

389
Test of recordType subroutine
1104
LDR
a#

390
Test of migration datetime; migration is in 2019 :)
1000
005
/^2019[0-9]{4}[0-9]{6}\.0$/

391
Test of migration date; migration is in 2019 :)
1000
948
/^‡a2019[0-9]{4}$/

392
Macro generate007: with *form (Videorecording)
9992
007
vf#|u||u|

393
Macro generate007: with *form (3.5 floppy disk)
179694
007
cj#|a|||||||||

394
Macro generate007: no *form
1187
007
/^ta$/

395
008: test of recordType subroutine (copy in 008)
1213
008
/^.{34}\|/

396
008: resultant value is exactly 40 characters long
1210
008
/^.{40}$/

397
008: positions 00-05; migration is in 2019 :)
1210
008
/^19[0-9]{4}[a-z]/

398
008: positions 06-14 *ser with unknown start and end dates
1072
008
uuuuuuuuu

399
008: positions 18-20: minutes
163911
008
/^.{18}\|\|\|/

400
008: positions 18-20: 2 hours
96479
008
/^.{18}120/

401
008: positions 24-27: *art/*j position 24 always |
1213
008
/^.{24}\|/

402
008: positions 24-27: *location = 'Theses' bounded start (at start of string)
3152
008
/^.{24}m/

403
008: positions 24-27: *location = 'Theses' bounded start (in middle of string, but at word boundary)
21127
008
/^.{24}m/

404
008: positions 24-27: pad out with #
21127
008
/^.{24}m###/

405
008: position 28: Sound cassette
102409
008
/^.{25}\|/

406
008: position 28: Default case
9999
008
/^.{28}\|/

407
008: position 29: Multimedia
182611
008
/^.{29}#/

407
008: position 29: Default case
9999
008
/^.{29}0/

408
008: test locationContains0613 subroutine
6201
008
/^.{29}1/

409
008: positions 30-31: Multimedia
182611
008
/^.{30}##/

410
008: positions 30-31: Sound, with *ks ^82-2 match
142030
008
/^.{30}bd/

411
008: positions 30-31: pad out with #
178689
008
/^.{30}b#/

412
008: positions 30-31: *ser without *form
1031
008
/^.{30}##/

413
008: positions 30-31: DVD
160682
008
/^.{30}##/

414
008: position 32: fixed value is #
1031
008
/^.{32}#/

415
008: position 33: Multimediaish *form
162291
008
/^.{33}v/

416
008: test of kFieldMatches subroutine in word boundary mode
21310
008
/^.{24}r/

417
008: position 34: Multimediaish *form
162291
008
/^.{34}\|/

418
008: position 34: 92[*
1854
008
/^.{34}b/

419
008: position 34: 92(08)
1858
008
/^.{34}c/

420
008: ends with fixed string #d
1000
008
/#d$/

421
546: Macro isTransliterated triggered for Russian language record
1526
546
BGN/PCGN 1947 romanization of Russian

422
546: Macro isTransliterated not triggered for non-Russian language record
1527
!546
*

423
Macro 880subfield6 ends if no value
151048
!880
110-0

424
Macro 880subfield6 incoming multiline results in multiple 880 entries
162152
880
‡6700-06/(N‡aВтюрин, Борис.‡t

425
Macro 880subfield6 mutated 71x amongst other 7xx is reordered: 710 field (see also next test)
68500
880
‡6710-08/(N‡aАыталын.

426
Macro 880subfield6 mutated 71x amongst other 7xx is reordered: field before 710 (see also previous test)
68500
880
‡6700-07/(N‡a

427
Macro 880subfield6 multiline can go into double-digits: target (see also next test)
150141
880
‡6700-11/(N‡a

428
Macro 880subfield6 multiline can go into double-digits: source (see also previous test)
150141
700
‡6880-11‡a

429
Macro 880subfield6 multiline retains correct indicators in middle (here testing 710-11, though not a very robust test)
150141
i880
2#

430
Macro 880subfield6 single line
150141
880
‡6490-03/(N‡

431
Macro 880subfield6 has zero padding when single digit
150141
880
‡6700-04/(N‡

432
Macro 880subfield6 does not add space after ‡6 marker
150141
880
‡6700-04

433
Macro generate250 ‡a
1405
250
‡a10th ed.

434
Macro generate250 ‡b
3887
250
‡bsuperintended by Rev. Robert Main.

435
Macro generate250 ‡b multiple sections separated by semicolon using roleAndSiblings routine
7017
250
‡boriginal drawings by Chr. Krohg, Otto Sinding and E. Werenskiold; photographs taken in Greenland by Erich Dagobert von Drygalski.

436
Macro generate250 no output if no subfields
1031
!250
*

437
Macro generate250 compile with space between subfields
45901
250
‡a2nd ed. /‡bcontaining

438
Macro generate250 dot end
2549
250
/‡aNew edition \(Fourth\).$/

439
245: If there is a / in the title explicitly, use that (see also #546)
178029
245
/^‡aA description of Siberian peoples by Gerhard Friedrich Mueller \/‡cAlexander Elert.$/

440
245: / title handling not triggered by </em>
1131
245
of Euphausia superba Dana /‡cJ. Mauchline.

441
880: parallel title part of *t should not be transliterated
65712
880
Migrations of birds of eastern Europe and northern Asia

442
Roman numerals range
79994
880
XVII-XIX

443
Macro generate250 ‡b no $b due to absence of *ee
1405
250
/‡a10th ed\.$/

444
Macro generate490 no *ts means no output
1253
!490
*

445
Macro generate490 with explicit semicolon divider
2296
490
Bilderbuchs ;‡vI-IV Heft

446
Macro generate490 with explicit semicolon divider
5517
490
Command Papers ;‡vC.6253, 6368

447
Macro generate490 with explicit semicolon divider space trimming
2296
490
Bilderbuchs ;‡vI-IV

448
Macro generate490 split using volume numbers regexp list (first in list)
38395
490
Project ;‡v261, Final Report

449
Macro generate490 longest first
6264
490
;‡vparts 1 and 2

450
Macro generate490 compare case-insensitively
170770
490
;‡vno. 355-5

451
Macro generate490 simple series title without volume number
1188
490
/^‡aT-516$/

452
490 *vno becomes $v
10279
490
‡vCartes

453
Macro generate490 add *vno to existing $v (see also #453)
9031
490
‡vN:r 4, Bd. 1 (Abt. 3, Gletscherkunde, Leif. 1)

454
Macro generate490 $a with $v trailing dot
20040
490
Pub ;‡vNo

455
Macro generate490 $a normalise space before semicolon
31402
490
SSSR ;‡vTom 27

456
541 multiline
3959
541
/^‡aBreitfuss ‡5UkCU-P$/

457
541 single line
176629
541
‡ca2085809--BA Russia ‡a

458
541 ‡c *fund alone becomes ‡c
132544
541
‡cAO4J7D ‡a

459
541 ‡c *fund and *sref
176629
541
‡ca2085809--BA Russia ‡a

460
541 ‡c *fund and *kb but no *fund
195699
541
‡c60129--Exchange - PR and PGA ‡a

461
541 ‡c *kb
1010
541
‡cExchange - PR ‡a

462
451 ‡c *sref
168419
541
‡c329400 ‡a

463
451 ‡a
1050
541
‡aMinistry of Works and Division (gift) ‡

464
451 ‡d
3173
541
‡d2001/01/11 ‡

465
451 ‡h
3173
541
‡h85.00 UKP ‡

466
541 ‡5
3173
541
/ ‡5UkCU-P$/

467
No 541 created if no *acq and no *kb
3174
!541
*

468
541 multiline also gets correct indicator
3959
i541
/^0#$/

469
isNotRoundBracketed test (positive case)
1003
650
656.61.05

470
isNotRoundBracketed test (negative case)
1003
!650
(*7)

471
isRoundBracketed test (positive case)
1003
651
(*7)

472
isRoundBracketed test (negative case)
1003
!651
656.61.05

473
addLookedupKsValue *ks has additional description string
1008
650
: 1962- British Antarctic Survey.

474
addLookedupKsValue *ks status tokens match
166245
!650
PGA

475
addLookedupKsValue UDC lookup
166245
650
‡a82 -- Literature.

476
650 ends with dot (before ‡2)
166245
650
Komi: Komi.‡2

477
650 *rpl E1 fixed up to E2
16098
650
‡aE2

478
650 *rpl description lookup
16098
650
Glaciology: general.

479
650 *rpl assembly
1102
650
/^‡aL -- Communication and transportation\.‡2local$/

480
650 repeatability
1102
650
‡a656.61.052

481
651 repeatability
1102
651
‡a(*62) -- Canadian Arctic waters.

482
lookupTable round bracket stripping
2027
008
/^.{15}au#/

483
lookupTable case-insensitive comparison (input side) (see also #489)
52260
008
/^.{18}ar/

484
Basic lookupTable test
173681
008
/^.{18}ar/

485
Undo Muscat escaped asterisks @*
2110
651
‡a(*3)

486
loadLookupTable needs definition of empty value fallback value
1003
008
/^.{18}#u/

487
loadLookupTable needs definition of false fallback value
180289
008
/^.{35}eng/

488
loadLookupTable does diacritic substitution
148511
008
/^.{18}qn/

489
loadLookupTable case-insensitive comparison (definition side) (see also #483)
52260
008
/^.{18}ar/

490
500 generate500analytics (/art/j genuine analytic mode) basic test
1109
500
‡aBritish Schools Exploring Society. Report. Vol. 1978-79 :1-38 (1979)

491
generate500 strips subfield indicators
22095
500
‡aIn: Pushnye bogatstva SSSR. Vypusk pervyĭ / M.S. Kuznet͡sov,

492
generate500 prefix for */art/
1222
500
‡aIn: Running the North

493
773 lookupHostRecord
1129
773
‡wSPRI-57536

494
773 *kg not present so no 773
2075
!773
*

495
773 ‡a: pull in 100
2073
773
‡aAnonymous. ‡

496
773 ‡a: pull in 245 ‡c
1222
773
‡aRebecca Aird, ed. ‡

497
773 ‡a has dot after
67559
773
‡aJania, Jacek. ‡t

498
856 DOI appears as ‡uurn:doi:
188509
856
‡uurn:doi:10.1002/aqc.709

499
856 DOI appears also as URL
2175
856
0023‡uhttps://dx.doi.org/10.1098

500
In roleAndSiblings, *role (e.g. 'compiled by') is not subject to transliteration
1844
880
; compiled by И.Л. Жеребцов.

501
{1|7}xx should be created but contents should not be transliterated when *nt = None present for author (see also #502)
151048
700
/^‡aGorman, Michael R.$/

502
880-{1|7}xx not generated when *nt = None present for author, because the {1|7}xx is Latin characters (see also #501)
2650
!880
Беллингшаусен, Тhаддеус

503
880-245 in scope of transliteration retains Latin characters when *nt = None present for author; this is for non-upgraded records where explicit / + authors in Cyrillic has not been defined
166652
880
‡cА.П. Капица, W. Gareth Rees, eds.

504
245 in scope of transliteration, with explicit / , Russian names end up transliterated as LoC
6449
245
‡clekt͡sii: Barona F. Vrangeli͡a i Vit͡se-Admirala S.O. Makarova.

505
880-245 in scope of transliteration, with explicit / , Russian names end up as Cyrillic
6449
880
‡cлекции: Барона F. Врангеля и Вице-Адмирала С.О. Макарова.

506
In 245, space-semicolon-space indicates split point for ‡b (if not already split because of : or / )
139981
245
‡aAdventure at the top of the world ;‡bAdventure at the bottom of the world /‡c

507
In 245, semicolon (without surrounding spaces) does not create ‡b split point
1156
245
‡aThe Center for Northern Studies; general information bulletin

508
In 245, when both colon and space-semicolon-space both present, choose the first as the delimiter
1387
245
Hatteras :‡bLes anglais au Pôle Nord; Le désert

509
*note goes in 500
1019
500
‡aTitle varies: "Canada.

510
Multiple *note in 500
1019
500
‡aPublisher and agency responsible varies as govt. dept. changes

511
*local goes in 876
1019
876
‡zSPRI catalogue has entries for

512
*pt with plural keyword (e.g. 'maps') creates ‡b split point
1684
300
1-23 :‡bmaps, tables.

513
300 ‡a *doc with volume information and citation creates space with brackets (see also #628)
2281
300
‡a3 vols. (xliv, 564 p.; xii, 612 p.; xv, 694 p.) :‡b

514
773 in *art with analytic volume designation present appears as ‡g
1668
773
‡gVol. 7(3) ‡

515
773 in *art/*in without analytic volume designation should have no ‡g
54886
773
‡dNovosibirsk : Nauka, 1976. ‡wSPRI-55908

516
300 ‡a should not contain volume designator (case where *pt has space-colon)
1668
300
‡ap. 233-266 :‡b

517
300 ‡a should not contain volume designator (case where *pt does not have space-colon)
54886
300
‡ap. 191-197.

518
773 ‡g contents of *vno should appear at the start, with a dot before other material (see also test #352)
7865
773
‡gTome 2. Physique terrestre. Météorologie. Histoire naturelle. Sect. 7.

519
773 ‡g for *art/*j without an analytic volume designation should include date (*art/*j/*d)
4844
773
‡g(1882) ‡

520
773 ‡g with *d = '[n.d.]' should not have date string appearing
1166
773
‡gVol. 18 ‡

521
773 ‡g analytic volume designation should be prefixed with "Vol. " if numeric (positive match)
1668
773
‡gVol. 7(3)

522
773 ‡g analytic volume designation should be prefixed with "Vol. " if numeric (negative match)
1300
773
‡gSer. 3

523
300 ‡a should not start with a colon
1107
300
‡ap. 341-343.

524
300 ‡a should have "p. " when not already present
1107
300
‡ap. 341-343.

525
300 ‡a should not have extra "p. " added when already present
6448
300
‡a24 p.

526
300 ‡a general example, with ‡b having been split off
189056
300
‡a1 disc :‡bill

527
Pseudo-analytics should get a 500
1126
500
‡aOffprint: International Review of Applied Psychology

528
300 ‡b should have trailing punctuation removed (except dot)
9529
300
‡bill. ;‡c

529
773 ‡t should use only space as splitter
67559
773
‡tField investigations performed during the glaciological Spitsbergen expedition in 1983 : interim report. ‡d

530
773 ‡t without host 245 ‡b gets no extra characters
59148
773
‡tGeologii͡a i tektonika rudonosnykh regionov I͡akutii (sbornik). ‡d

531
773 ‡t ends with dot
59148
773
‡tGeologii͡a i tektonika rudonosnykh regionov I͡akutii (sbornik). ‡d

532
773 $d uses space-colon-space between host 260 $a and $b
67559
773
‡dKatowice : Uniwersytet Ślaski, 1983. ‡w

533
300 *pt with multiple abbreviations has each receiving dot
147891
300
ill., diags.,

534
300 *pt addition of dot to abbreviation supports plural 's'
34364
300
ills.,

535
300 *pt split happens on first keyword
12780
300
1-28 :‡bill., diags., tables, maps.

536
500 Normalise space after colon when just before $b
5472
500
Polarforschung 1882-83 : die deutschen Expeditionen

537
500 for analytics not created for non-analytic record
1102
!500
*

538
500 generate500analytics (/art/in genuine analytic mode) basic test
5472
500
‡aIn: Die internationale

539
500 generate500analytics (/art/in scenarios) ensure slash has space just before $c
2072
500
navigation. Vol. 2 / Anon.

540
500 generate500analytics (all scenarios) goes in $a
1109
500
‡aBritish Schools Exploring Society

541
500 generate500analytics (/art/j pseudo-analytic mode) starts with Offprint and uses the title in the *j (i.e. second half) section
214872
500
‡aOffprint: Journal of the Meteorological Society of Japan.

542
500 generate500analytics (/art/j pseudo-analytic mode) gets "Vol. " prefix if analytic volume designation starts with a number (positive case)
214872
500
of Japan. Vol. 58(5)

543
500 generate500analytics (/art/j pseudo-analytic mode) gets "Vol. " prefix if analytic volume designation starts with a number (negative case)
215150
500
of Natural History. Ser. 7

544
500 generate500analytics (/art/in pseudo-analytic mode) starts with Offprint uses the title in the *in (i.e. second half) section
1107
500
‡aOffprint: CRC handbook of census methods for terrestrial vertebrates / D.E. Davis, ed.

545
500 generate500analytics (/art/in pseudo-analytic mode) gets "Vol. " prefix if analytic volume designation starts with a number (positive case) (see also #542)
1218
500
for All. Vol. 5 /

546
500 generate500analytics (/art/in pseudo-analytic mode) creates an emulated statement of responsibility if author group(s) present in *in (i.e. second half) section - simple case
14136
500
‡aOffprint: The story of exploration and adventure. Vol. 4 / Sir Percy Sykes

547
500 generate500analytics (/art/in pseudo-analytic mode) creates an emulated statement of responsibility if author group(s) present in *in (i.e. second half) section - more complex case: multiple author groups
1330
500
in Einzugsgebieten / G. Blöschl, D. Gutknecht, R. Kirnbauer, [eds.]

548
500 generate500analytics (/art/in pseudo-analytic mode) creates an emulated statement of responsibility if author group(s) present in *in (i.e. second half) section - more complex case: corporate author
1811
500
Antarctica. Scientific Report / Geological Survey of India. Department of Ocean Development

549
245: If there is a / in the title explicitly, use that and discard all people groups (see also #439 and #714)
2683
245
‡aPoezdka v I͡akutsk /‡cizd. N. Shch.

550
Leader: Position 7 for pseudo-analytic (i.e. /art with no host record) is 'm'
1330
LDR
/^.{7}m/

551
500 generate500analytics: Section from 245 $h has space before (unlike original 245 $h from which it is derived)
64883
500
1981 [microform]

552
500 generate500analytics (/art/in genuine analytic mode) $c role (using semicolon) is stripped
101441
500
/and 23 others$/

553
500 generate500analytics (/art/in genuine analytic mode) $c role (using semicolon) is stripped; second example involving Edited by
5029
500
/Tait, A. Renard$/

554
500 generate500analytics strips out any $6 -derived section
22095
500
‡aIn: Pushnye bogatstva

555
300 Ensure space after a comma when not already present
8167
300
vii, 347

556
490 Add support for $x (ISSN), in form of MARC-style syntax added to Muscat record; see also test 566
148932
490
‡x1436-803X

557
490 Ensure comma before ‡x
148932
490
Circular,‡x1436-803X

558
Dollar in 500 is not an indicator, but wrongly triggers Bibcheck error now whitelisted
161883
500
$220

559
700: No space before ‡d in special case
172094
700
‡cLord,‡d1920-1999

560
{1|7}xx: No space before $d
57564
111
‡aSymposium on Antarctic Resources‡d(1978)

561
245 $c "edited by" etc., should have lower-case first letter
193443
245
Tivi Etook /‡cedited by Marybelle Myers.

562
245 $c standalone role avoid ending space-dot
204088
245
/Goering ; klavier-auszug mit Gesang.$/

563
008 positions 30-31 *doc *form=CD with *k=82-1 gets p
167945
008
/^.{30}p#/

564
245 parallel title section should not have e-dot in English text; see also next test
41504
245
Issue 4

565
880-245 parallel title section should not have e-dot in English text; see also previous
41504
880
Issue 4

566
490 Add support for $x (ISSN), in form of MARC-style syntax added to Muscat record; see also test 556
70414
490
Report,‡x0161-3243 ;‡vNo. 4

567
250 ‡x requires slash before
3421
250
ed. /‡billustrated by

568
LDR for /art/j should also be 'a'
1768
LDR
/^.{7}a/

569
773 ‡7 example with 100 in parent
215149
773
‡7p1am 

570
773 ‡7 example with 110 in parent
36315
773
‡7c2am 

571
773 ‡7 example with no 1xx in parent
1768
773
‡7nnas 

572
500: 773 ‡7 does not appear in 500
175904
500
/^‡aJournal of Navigation./

573
035 gets VoyagerBelievedMatch tag when /ser/kc/k2 present
1046
035
VoyagerBelievedMatch-348234

574
No 035 VoyagerBelievedMatch when /ser/kc/k2 not present
1049
!035
VoyagerBelievedMatch

575
Multiple *form results in multiple 007 (test 1 of 2 - see also next test)
181410
007
vd#|v||z|

576
Multiple *form results in multiple 007 (test 2 of 2 - see also previous test)
181410
007
co#|g|||||||||

577
245 without *form has no ‡h
9542
!245
‡h

578
245 with multiple *form gets ‡h[first; second]
181410
245
‡h[videorecording; electronic resource] :

579
245 ‡h are normally lower-cased
12359
245
‡h[videorecording]

580
245 Look up from list, rather than using *form directly
160682
245
‡h[videorecording]

581
505 Contents note does not appear as 500
1488
!500
‡aThe geology of the Nuuk region -- The oldest rocks on Earth

584
856 support for conversion to internationalized domain name (IDN)
197739
856
‡uhttps://северноеиздательство.рф/issues/2/

585
916 combinations of components within *acc groups have double-dash between them
3959
916
‡a8363 -- 1951/07/31

586
916 *acc groups are separated by semicolon
3776
916
‡a201 -- 1947/04/14; 30409 -- 1962/12/19

587
505 Contents note - Basic format
1488
505
‡aThe geology of the Nuuk region -- The oldest rocks on Earth -- The

588
505 Contents note - Enhanced format
4660
505
‡tPars prima = 1ste Afdeling. Fanerogamer og Karsporeplanter /‡rJohan Lange --‡tPars secunda

589
505 Contents note - Basic format: second indicator
1488
i505
0#

590
505 Contents note - Enhanced format: second indicator
4660
i505
00

591
505 Contents note does not start with "Contents: "
1488
!505
Contents: 

592
020 ISBN support for qualifying information
215088
020
‡a5744206663‡qbk. 1

593
500 Ensure whole string in /art/in psudo-analytic ends with dot (not previously present)
1244
500
/O.F. Snelling.$/

594
500 Ensure whole string in /art/in psudo-analytic ends with dot (previously present)
1107
500
/D.E. Davis, ed.$/

595
500 Ensure whole string in /art/j psudo-analytic ends with dot (not previously present)
214872
500
/Society of Japan. Vol. 58\(5\) :438-442.$/

596
500 Dot-end when volume designation present
214872
500
Society of Japan. Vol

597
300 page count compiled
54657
300
‡a17 p. :‡b

598
300 page count: single page number
2237
300
‡a2 p.

599
300 page count: page range
54657
300
‡a17 p.

600
300 Do not add p. prefix if contains square bracket, like '[42] pages'
169753
300
‡a[42] pages

601
300 Do not add p. prefix if multimediaish article
2023
300
‡a80 mins.

602
300 Do not add p. prefix if unpaged (and variants)
1147
300
‡avariously paged

603
300 Comparison for unpaged (and variants) for p. prefix is case-insensitive
209663
300
‡aVariously paged

604
300 Items like "Not in SPRI" which may have no p. (which will not be fixed) should end up with "‡ap." - see /reports/artnopt/
3981
300
/^‡ap.$/

605
300 page count: test of tokenisation, which enables addition to work (multiple page ranges in group)
54657
300
‡a17 p.

606
300 page count: test of tokenisation, which enables addition to work (single page range in group)
3656
300
‡a93 p.

607
300 page: If only one item in the citation list, list out the page details
214872
300
‡ap. 438-442

608
300/500/773 tokenisation routine splits into groups by semicolon
54657
773
‡gVols. 41(11); 41(12); 42(1)

609
300/500/773 tokenisation routine splits out "<volume>: <pagination-string>" into pairs
54657
773
‡gVols. 41(11); 41(12); 42(1)

610
300/500/773 tokenisation routine puts simple pagiation in as empty volume => <pagination-string>
6787
300
‡ap. 397-412.

611
917 Supression status appears
1026
917
‡aSuppression reason: EXTERNAL-LOCATION (Item of bibliographic interest, but not held at SPRI, so no holdings record can be created)

612
917 No suppression reason expected
1027
!917
Suppression reason

613
917 Multiple supression reasons generates multiple 917 fields
1122
917
‡aSuppression reason: EXPLICIT-SUPPRESS (

614
917 not repeatable, so multiple subfields on one line
1331
917
‡aUnenhanced record from Muscat, imported 2018 ‡aSuppression reason

615
917 Supression explanation present
1026
917
‡aSuppression reason: EXTERNAL-LOCATION (Item of bibliographic interest, but not held at SPRI, so no holdings record can be created)

616
948 ‡d status from *ks is present
56056
948
‡dMISSING

617
948 ‡d multiple status from *ks separated by semicolon
60776
948
‡dMISSING; D

618
948 ‡d status with square brackets matched and used in the data
2823
948
‡dMISSING[2002.02.13]

619
948 ‡d status from *status
1373
948
‡dRECEIVED

620
948 ‡d status from *status excludes special keyword SUPPRESS
10001
!948
SUPPRESS

621
852 with single location
1102
852
‡2camdept ‡bSCO ‡cSPRI-SHF ‡h(*60) : 656.61.052

622
852 with multiple locations
3959
852
‡2camdept ‡bSCO ‡cSPRI-SPC ‡hPamphlet Boxes Breitfuss 91(08) : (*3)[1871 Weyprecht and Payer]

623
852 has camdept as source, without space before
3959
852
‡2camdept

625
852 "Shelved with" has modified string as ‡c
1032
852
‡cIssues shelved individually with monographs

626
300 ‡a for *doc uses citation (see also next test)
2281
300
(xliv, 564 p.; xii, 612 p.; xv, 694 p.) :

627
300 ‡a for non- *doc uses pages (see also previous test)
54657
300
‡a17 p. :

628
300 ‡a *doc with volume information only - no citation created and thus no brackets (see also #513)
37420
300
‡a5 vols. ;‡c

629
300 ‡b basic presence
9529
300
 :‡bill. ;‡c

630
300 ‡b non-abbreviated split point (e.g. map/tables/table)
24489
300
 :‡btables.

631
300 ‡b explicit " : " split point
199582
300
‡a2 sound discs (45.5 min.; 54.5 min.) :‡bdigital

632
300 protect "leaves of map" which forms part of the physical extent, to bypass the keyword splitter
13890
300
‡ap. 203-306, [4] leaves of maps :‡bill.,

633
260 ‡c uses *r for *ser records
1009
260
‡c1975-78.

634
260 ‡c uses *d for non- *ser records
5943
260
‡c1894.

644
260 *ser records with textual *r have no ‡c (see also next record)
1024
260
/‡b\[s.n.\]$/

645
260 *ser records with textual *r have no ‡c (normal year case; see also previous record)
1029
260
‡c1991.

647
852 ‡h is not created when no classmark (for standard SPRI locations) (see also previous test, and #647)
31500
852
/‡cSPRI-BIB$/

648
852 with no location gets ‡cSPRIACQ
1331
852
/^‡2camdept ‡bSCO ‡cSPRIACQ$/

649
852 Not in SPRI - with another location
7976
852
‡2camdept ‡bSPRI-NIS ‡xRoyal Geographical Society ‡zNot in SPRI

650
852 Not in SPRI - with no other locations
1302
852
‡2camdept ‡bSPRI-NIS ‡zNot in SPRI

651
852 Not in SPRI - with multiple other locations
31021
852
‡2camdept ‡bSPRI-NIS ‡xCambridge University Library ‡xLibrary of Congress ‡zNot in SPRI

652
260 Empty $a and $b value with date still shows $a and $b
76740
260
‡a[S.l.] :‡b[s.n.],‡c1985.

653
852 "Shelved with" does not get $h
1032
852
/‡cIssues shelved individually with monographs$/

654
852 ‡c is created
31500
852
‡cSPRI-BIB

655
852 MISSING gets ‡z
1014
852
‡zItem(s) missing

656
852 ambiguous location codes get a ‡c qualifier
2023
852
‡cLibrary Office

657
852 ambiguous location codes get a ‡c qualifier except SPRI-SER/SPRI-SHF/SPRI-PAM
211109
852
‡cSPRI-SER ‡zSee related

658
852 non-ambiguous location codes do not get ‡c qualifier
1711
852
‡cSPRI-CBD ‡h202

660
500 generate500analytics (/art/j pseudo-analytic mode) gets citation
2237
500
Nachrichten. Vols. 14 :260; 15 :45.

661
500 generate500analytics (/art/in genuine analytic mode) gets volume list
4268
500
and annexe. Vol. 1(2) / Institut de France

662
500 generate500analytics (/art/in genuine analytic mode) volume list is just before split point
4268
500
and annexe. Vol. 1(2) / Institut de France

663
500 generate500analytics (/art/in genuine analytic mode) gets dot before the inserted volume list that is being added just before the split point (see also next test)
2905
500
Majesté. Vols

664
500 generate500analytics (/art/in genuine analytic mode) dot before the inserted volume list not added when already has dot (see also previous test)
2995
500
1843 ... Vol

665
500 generate500analytics (/art/in pseudo-analytic mode) gets volume list
11526
500
‡aOffprint: Scottish National Antarctic Expedition. Vol. 1.

666
773 ‡t uses 245 ‡a and ‡b from the host record
67559
773
‡tField investigations performed during the glaciological Spitsbergen expedition in 1983 : interim report.

667
773 ‡d uses 260 from the host record
6787
773
‡dLondon and New York : Harper and Brothers, 1899. ‡g

668
773 ‡d use of 260 does not include ‡6 transliteration 880 marker
59148
773
‡dYakutsk : I͡akutskiĭ Gosudarstvennyĭ Universitet, 1979. ‡w

669
773 subfields separated by space
6787
773
‡7p1am ‡aJackson, Frederick George. ‡tThousand days in the Arctic. ‡dLondon and New York : Harper and Brothers, 1899. ‡gVol. 2. ‡wSPRI-6786

670
773 ‡w has 001 (Record control number) from host record
6787
773
‡wSPRI-6786

671
773 ‡g created if g components
1283
773
‡gVol. 1990-91

672
773 ‡g values are joined by space
1200
773
‡gVol. 10 (1931)

673
500/773: generate773 analytic volume designation component of ‡g, in 500 mode for 500 generate500analytics (/art/j genuine analytic mode) uses citation (see also next test)
1109
500
1978-79 :1-38

674
773 ‡g analytic volume designation component uses volume list rather than citation (see also previous test)
1668
773
‡gVol. 7(3) ‡w

675
773 ‡g analytic volume designation uses 'Vols. ' for multiple (see also next test)
6100
773
‡gVols. 17; 18; 19 (1895-96) ‡w

676
500 gets 'Vols. ' for multiple in this 500 also (see also previous test)
6100
500
Vols. 17 :1-358; 18 :1-476; 19 :1-247 (1895-96)

677
500 generate500analytics /art/in gets 'Vol. ' / 'Vols. ' for consistency
5472
500
Abhandlungen. Vol. 2 / Georg

678
Volume list part of pOrPt registry uses the keys from the citation list
4268
773
Vol. 1(2)

679
Volume list part of pOrPt registry has multiple values separated by semicolon-space
6100
773
Vols. 17; 18; 19

680
Citation part of pOrPt registry has comma/colon/semicolon at end trimmed before tokeniseCitationList
9529
300
iv, 127 p. :‡b

681
Citation carried-through value example
2237
500
Vols. 14 :260; 15 :45.

682
500 citation list and date example
54657
500
Vols. 41(11) :14-18; 41(12) :22-25; 42(1) :26-28, 68-72 (1975-1976)

683
combineSubfieldValues test of normalise trailing implode (doesn't have two colons)
103259
773
London : Graham

684
combineSubfieldValues test of onlySubfields
1222
773
‡aRebecca Aird, ed. ‡

685
combineSubfieldValues basic allocation of field values
2494
773
‡aFranklin, John,

686
combineSubfieldValues implodes multiple field values of subfield by comma-space
7008
773
‡dChristiania, London, Leipzig

687
combineSubfieldValues avoid multiple commas after joining
2614
773
John, Sir.

688
combineSubfieldValues avoid ending a field with " /"
2616
773
naturalist to the expedition. ‡d

689
combineSubfieldValues combines with the specified string
2614
773
London : John

690
combineSubfieldValues strip leading article if required (English example; see also next test)
3075
773
‡tVoyage of discovery

691
combineSubfieldValues strip leading article if required (German example; see also previous test)
5472
773
‡tInternationale Polarforschung

692
combineSubfieldValues strip leading article if required - example of no stripping
5476
773
‡tRecueil de

693
combineSubfieldValues prepends the parent subfield letter
5487
773
‡aGeorg von

694
combineSubfieldValues upper-case first letter of string after stripping leading article
3075
773
‡tVoyage of

695
combineSubfieldValues basic test of splitting in parseMarcRecord/parseSubfieldsToPairs basic test of splitting (tested by resulting data being used in a record using combineSubfieldValues)
5472
773
‡tInternationale Polarforschung 1882-83 : die deutschen Expeditionen

696
Macro dotEnd checks against a strip-tagged version
7463
710
/la Commission de la Belgica\.$/

697
xPathValues does not terminate early after reaching a not-found path as the index may be part of a hierarchy
60776
948
‡dMISSING; D

698
xPathValue basic test
1000
001
1000

699
xPathValues basic test
1003
651
Southern Ocean

700
xPathValues returns values indexed from 1, not 0 (as per test #112)
1127
!700
‡aEvers, Dietrich

701
nfCount macro returns 0 for language is not in the list of leading articles
211109
i245
/0$/

702
nfCount is done case-insensitively
1127
i245
/4$/

703
transliterateSubfields returns unmodified if the language mode is default
211150
700
‡aMacKenna, John,‡enarrator.

704
490 gets volume number, preceeded by a space-semicolon
31402
490
SSSR ;‡vTom 27

705
Undo Muscat escaped asterisks
19682
520
filed at (*495)

706
Italic conversion consumes \v and \n
205430
520
octopus species Bathypolypus arcticus and Haliphron

707
Italic conversion consumes \V and \N
131259
245
Atlantic walruses (Odobenus rosmarus rosmarus) from

708
Volume ordinal indicator from V}o{ does not use degree symbol
163845
245
el Vº centenario

709
Number ordinal indicator from n}o{ does not use degree symbol
29493
490
nº 45-46

710
Degree symbol used not ordinal indicator for other cases (see previous two tests)
49506
520
north of 75°.

711
300 gets space between square-bracketed [number] and p.
13270
300
‡a[4] p.

711
Diacritics: basic example e^a
148511
500
Géographies

712
Diacritics: tilde
207146
245
VI ~12 kbar

713
Diacritics: upper-case
4932
245
Østkyst

714
*t having explicit slash with role and siblings only uses / part (see also #549)
58214
245
/1914 g. \/‡cV.I. Alʹbanov ; predislovie i kommentarii Mikhaila Chvanova.$/

715
533 Printout
142020
533
‡aPrintout.‡bCambridge, UK :‡c

716
533 Printout does not get a 500
142020
!500
Printout

717
533 Printout has preformatted | converted to double-dagger
142020
533
‡aPrintout.‡bCambridge, UK :‡c

718
533 End if not a reproduction note
1150
!533
*

719
Anonymous is protected string in transliteration
1571
880
‡aAnonymous.

720
583 basic presence
171183
583
‡3binding ‡acondition reviewed ‡c20150101

721
583 splits on (first) space-colon-space
171183
583
‡3binding ‡acondition reviewed ‡c20150101 ‡ldamaged

722
583 contains ‡2 pda and ‡5 institution
171183
583
‡2pda ‡5UkCU-P

723
583 not generated if no *con
171184
!583
*

724
583 multiple *acc blocks
10519
583
‡3copy B (text block) ‡acondition reviewed ‡c20150101 ‡ldamaged

725
583 multiple *con in an *acc block
12376
583
‡3copy A (maps) ‡acondition reviewed ‡c20150101 ‡ldamaged ‡2pda ‡5UkCU-P ‡zphysical, significant

726
916 does not include *con
12376
!916
Binding : slight

728
*nt = BGNRus in a non-Russian record gets upgraded to LoC cyrillic and thence a mirror field created (implementation pending; not likely to be implemented; see /reports/ntcyrillicinscope/)
102036
880
Ermolaev, Rafaėlʹ Dmitrievich

729
*nt = None (in a Russian record) should not result in transliteration of the associated tokens (see also next test)
178377
!880
Реес, W. Гаретh.

730
*nt = None (in a Russian record) should not result in an associated 880 at all (see also previous test and #54)
178377
!880
‡6100-03

731
Contents note not created for notes not starting with "Contents: "
2652
!505
Part 3. The fish

732
700 from contents note not created for notes not starting with "Contents: "
2652
!700
Part 3. The fish

733
700 from contents note does not start with "Contents: "
1488
!700
Contents: 

734
700 from contents note only processes enhanced format notes
1488
!700
The geology of the Nuuk region

735
700 from contents note includes first block
4660
700
‡tPars prima

736
700 from contents note results in a successful line
2652
700
‡aJ. Richardson.‡tPt. 1. The quadrupeds.

737
700 from contents note with two authors in one section is split out
2652
700
‡aJ. Richardson.‡tpt. 2. The birds.

738
700 from contents note with multiple sections results in multiline
4660
700
‡aJohan Lange.‡tPars secunda

739
700 from contents note with two authors split out for non-English
4660
700
‡aChristian Jensen.‡tGrønlands Mosser

740
700 from contents note does not split on "et" as can be used in "et al"
145748
700
‡aJanet Sprintall, et al.‡tHigh resolution XBT/XCTD

741
ISBN support for X check digit
165286
020
‡a951012480X‡qv. 2

742
008 18-20 for non-multimediaish /art/j like non-multimediaish /art/in (see also #746)
73537
008
/^.{18}a##/

743
852 gets SCO institution indicator as ‡b
31500
852
‡bSCO

744
583 gets ‡z if third part
4960
583
‡ldamaged ‡2pda ‡5UkCU-P ‡zphysical, significant

745
852 created with ‡cUNASSIGNED if location is '??'
34671
852
‡cUNASSIGNED

746
008 position 30-31 *art/*j is not a continuing resource, but an article therefore should be treated as 'Book' type of 008, thus gets || (see also #742, #747)
20557
008
/^.{30}\|\|/

747
008 position 33 *art/*j is not a continuing resource, but an article therefore should be treated as 'Book' type of 008, thus gets 0 (see also #742, #746)
20557
008
/^.{33}0/

748
852 Test whether shelved with periodicals
20534
852
‡h82 A-B

749
852 Switch for real serial analytics
20557
852
‡zSee related holdings for SPRI location

750
852 Real serial analytics /art/j with host record gets ‡z fixed text
20557
852
‡zSee related holdings for SPRI location

751
852 Serial gets ‡h with location
20534
852
‡h82 A-B

752
Horizontal repeatability gets space between tokens
1010
876
articles only ‡zSome items

753
866 multiple ‡x
3339
866
22(1-6) ‡x(New series)

754
866 both ‡a and ‡x
3339
866
‡a1855-92 ‡x1(1-11)

755
710 in middle of block of 700s is properly mutated into 710
16272
710
‡aGrey Owl.

756
{1|7}xx basic multiline test
2295
700
/^‡aSonnini, C. S.,/

757
{1|7}xx basic test that no lines for field in generateAuthors registry generates no result line for that field
178377
!711
*

758
‡6880-xx‡.. should not have space after the ‡6 or before the following subfield
22095
880
‡6100-01/(N‡

759
880 Script identification code /(N appears, but only on the 880 side, not the source field - 880 side (see also next test)
1062
245
‡6880-01‡a

760
880 Script identification code /(N appears only on the 880 side, not the source field - source side (see also previous test)
1062
880
‡6245-01/(N‡a

761
240 English record without *lto for leading article "The " has that stripped
6897
240
‡aAntarctic expeditions

762
240 Non-English record with no leading article has no stripping
1165
240
‡aLevnads- och

763
Multiple *kg present uses first as linkage
1896
773
‡wSPRI-11625

764
700 from contents note has authors spaced out (single author implementation; see also next test)
12059
700
‡aJ. W. Gregory.‡t

765
700 from contents note has authors spaced out (multiple authors implementation; see also previous test)
145748
700
‡aJ. F. Read.‡t

766
852 not starting with a number, e.g. Shelf
100567
852
‡h(*7) : 551.7

767
852 trimmed location present creates ‡h (see also #647 for empty location)
100567
852
‡h(*7) : 551.7

768
852 real serial analytics (/art/in with host record) provides human-readable text to look up (see also next test)
100568
852
‡zSee related holdings for SPRI location

769
852 non- real serial analytics creates ‡h with trimmed location (see also previous test)
100567
852
‡cSPRI-SHF ‡h(*7) : 551.7

770
880-260: English record with bottom-half Russian, with publisher in bottom-half, gets transliterated
189648
880
‡bСахалинское Книжное Издательство

771
852 Serial held entirely in basement gets $h (see also next test for child)
165908
852
‡cSPRI-BMT ‡hBasement 53 E - 54 A

772
852 Analytic from serial held entirely in basement gets $z (see also previous test for parent)
180007
852
‡cSPRI-BMT ‡zSee related holdings for SPRI location

773
852 Serial held entirely in Russian collection gets $h (see also next test for child)
33585
852
‡cSPRI-RUS ‡hRussian MAT.GLYA.

774
852 Analytic from serial held entirely in Russian collection gets $z (see also previous test for parent)
137033
852
‡cSPRI-RUS ‡zSee related holdings for SPRI location

775
852 Location split across parts of the library parent shows both locations as semicolon-punctuated string
19822
852
‡cSPRI-SER ‡h132 C ; Basement 60 B-C

776
300 support for "[1] leaf of plates" gets appended to pagination count as physical extent
10957
300
‡a53 p., [1] leaf of plates :‡b

777
240 String after stripping leading article has first character made upper-case
13989
240
‡aVie et les voyages

778
710 requires dot when ) present before ‡t (unlike 700 - see next test)
215849
710
Aerofotogrammetrici (EIRA).‡tIl

779
700 does not require dot when ) present before ‡t (unlike 710 - see previous test)
215849
700
Aerofotogrammetrici (EIRA)‡tIl

780
700 from content note has subfield ‡t must be preceded by a question mark, full stop, hyphen or closing parenthesis
212487
700
[G. F. Müller].‡t

781
245 leading article count special cases
88579
i245
/4$/

782
nfcount strips tags
15161
i245
/4$/

783
*nt=LOCRus results in transliteration carrying straight through, and data appearing in final record
7702
110
‡aToll', Eduard Vasil'evich,‡cBaron.

784
240 gets ‡l with language (and dot before) when *lto present (see also next test)
1319
240
‡aNorga, mu rakkis aenan.‡lSami

785
240 does not get ‡l (or dot at end after ‡a) when *lto not present (see also previous test)
8792
240
/‡aNational Antarctic Expedition$/

786
240 does not get starting . immediately after indicators when *lto present but no *to
105148
!240
/^.‡lEnglish$/

787
Merging: second LDR is stripped
1011
!LDR
/^00273nas/

788
245: Handle parallel titles for non-filing count
100909
i245
/2$/

789
Protected shards are exempted from transliteration
15149
!880
Ленинград

790
*ts shard in protected strings list exempted from transliteration
150424
!880
Этhнологиcал

791
Author containing whole line "Anonymous." as protected string should not have 880 generated
1571
!880
Anonymous.

792
711 generated for conference
88204
711
Symposium and Workshop.

793
No 650 generated at all after status tokens are skipped from *ks
1041
!650
*

794
*recr in generate916
1424
916
1996/05/13 -- IW

795
No space between ‡a and author start
1103
100
‡aWonders

796
No space between comma and ‡c or between the ‡c and the title
1290
100
John,‡cSir.

797
Dot is at very end, not before any /‡c
1104
245
‡aGlen Prosen and the memory of an Antarctic tragedy /‡cDuncan Fraser.

798
No space between between colon and ‡b, or between ‡b and first letter of first word of subtitle
1247
245
cold water :‡bthe Beaufort Sea

799
If *pl is - then this should be replaced with '[S.l.]' (see also #308)
1787
260
‡a[S.l.]

800
If *pu is - then this should be replaced with '[s.n.]' (see also #313)
1788
260
‡b[s.n.]

801
No space between end of ‡a and ‡2
2800
650
Geophysics.‡2udc

802
546 filters out 'English' as only value
1007
!546
*

803
546 exceptExactly English does not filter out other (e.g. indigenous) language, such as Nenets
115769
546
‡aIn Nenets.

804
Provenance note does not end up as 500
17120
!500
Provenance

805
Public provenance note becomes 561
17120
561
‡aHugh Robert Mill's Antarctic Collection

806
Public provenance note has first indicator 1
17120
i561
/^1#$/

807
Private provenance note becomes 561
8957
561
‡aLetter

808
Private provenance note has first indicator 0
8957
i561
/^0#$/

809
Provenance note (private) does not appear in 876
8957
!876
Provenance: 

810
Multiple private notes become multiple ‡x
16928
876
1999 ‡xFormerly

811
Local provenance note becomes 561
189071
561
‡a"To Heather

812
Local provenance note has first indicator 1 (as per public note)
189071
i561
/^1#$/

813
Provenance note (local) does not appear in 876
189071
!876
Provenance: 

814
Library-specific information in public note ("SPRI has two copies") should not be in 500, but in 852 (see also next test)
123440
!500
SPRI has

815
Library-specific information in public note ("SPRI has two copies") should be in 852 ‡z (see also previous test)
123440
852
‡zSPRI has two copies

816
Library-specific information in local note ("SPRI has two copies") should not be in 876, but in 852 (see also next test)
1288
!876
SPRI has

817
Library-specific information in local note ("SPRI has two copies") should be in 852 ‡z (see also previous test)
1288
852
‡zSPRI has two copies

818
Library-specific information in private note ("SPRI has two copies") should not be in 876, but in 852 (see also next test)
122355
!876
SPRI has

819
Library-specific information in private note ("SPRI has two copies") should be in 852 ‡x (see also previous test)
122355
852
‡xSPRI has two copies

820
Library-specific information in note ("SPRI has two copies") appears in each 852
7455
852
[B] ‡zSPRI has 2 copies

821
Mid-word replacement protected in transliteration, but rest of word is transliterated (here, the start)
100714
880
ТГФ·0,5Pr₄NF·16H₂O

822
[Titles fully in square brackets like this] should not be transliterated
31750
!880
Contradictions between capitalistic countries

823
Cases of [square-bracketed strings like this] amongst other strings that are defined in the protected strings list are protected
139647
880
Федерации по статистике [State Committee of the Russian Federation on Statistics],‡c

824
Cases of [square-bracketed strings like this] amongst other strings that are not defined in the protected strings list are not protected
14186
880
‡bИздание DV [Дальневосточного] Общества

